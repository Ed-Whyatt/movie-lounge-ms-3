{% extends "base.html" %}
{% block content %}

<h2 class="text-center lounge-blue-text mt-3 mb-3">Add Movie</h2>

<div class="row">
    <div class="col-12 col-md-6 offset-md-3">
        <!-- Card from bootstrap -->
<div class="card lounge-white-bg">
    <div class="card-body">
        <!-- Form from bootstrap -->
        <form method="POST" action="{{ url_for('search') }}">

            <!-- Password input id = password-->
            <label for="query" class="form-label lounge-blue-text">Search For a Movie</label>
            <input type="text" id="query" name="query" minlength="3" maxlength="30"
             class="form-control" aria-describedby="queryHelpBlock" required>
            <div id="queryHelpBlock" class="form-text">
            </div>
            <button type="submit" class="btn lounge-light-blue-bg lounge-blue-text">Search</button>
            <a href="{{ url_for('add_movie') }}" class="btn lounge-blue-text btn-success">Reset</a>
        </form>
        <!-- End of form -->
    </div>
</div>
<!-- End of card -->
    </div>
</div>

      <!-- Boostrap card -->
      <div class="card mb-3 movie-card lounge-main-opaque-bg">

        <div class="row g-0">

            <div class="col-4">
                <div class="card-body">
                    <img src="{{ movie.poster }}" class="img-fluid rounded" alt="Movie poster">
                </div>
            </div>

            <div class="col-8">
                <div class="card-body lounge-blue-text">
                    <h5 class="card-title">{{ movie.title }}</h5>
                    <p class="card-text">Director: {{ movie.director }}</p>
                    <p class="card-text">Genre: {{ movie.genre }}</p>
                    <p class="card-text">Year: {{ movie.year }}</p>
                    <p class="card-text">User: {{ movie.created_by }}</p>
                    <p class="card-text">User Rating: {{ movie.user_rating }}</p>
                </div>
            </div>

            <div class="col-12">

                <!-- bootstrap accordion -->
                <div class="accordion accordion-flush" id="accordionFlushExample">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="flush-headingOne">
                            <!-- jinja loop index used for accordian -->
                            <button class="accordion-button collapsed lounge-blue-text lounge-main-bg" type="button"
                                data-bs-toggle="collapse" data-bs-target="#flush-collapse{{ loop.index }}"
                                aria-expanded="false" aria-controls="flush-collapseOne">
                                Click Here For More Information
                            </button>
                        </h2>
                        <div id="flush-collapse{{ loop.index }}" class="accordion-collapse collapse"
                            aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">

                            <div class="accordion-body lounge-opaque-gray-bg">
                                <div class="card-body">
                                    <ul class="list-group list-group-flush rounded">
                                        <li class="list-group-item lounge-opaque-gray-bg">Plot: {{ movie.plot }}</li>
                                        <li class="list-group-item lounge-opaque-gray-bg">Actors: {{ movie.actors }}</li>
                                        <li class="list-group-item lounge-opaque-gray-bg">IMDB Rating: {{ movie.imdb_rating }}</li>
                                        <li class="list-group-item lounge-opaque-gray-bg">Type: {{ movie.type }}</li>
                                        <li class="list-group-item lounge-opaque-gray-bg">Rated: {{ movie.rated }}</li>

                                        {% for category in categories %}
                                        {% if category_id == movie.category_id %}
                                        <li class="list-group-item lounge-opaque-gray-bg">Movie Lounge Category:
                                            {{ category.category_name }}</li>
                                        {% endif %}
                                        {% endfor %}

                                        <li class="list-group-item lounge-opaque-gray-bg">User Notes: {{ movie.user_notes }}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Bootstrap accordion end -->
            </div>


{% endblock %}