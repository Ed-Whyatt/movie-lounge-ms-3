{% extends "base.html" %}
{% block nav_add_movie %}active{% endblock %}
{% block content %}

<h2 class="text-center lounge-blue-text mt-1">Edit Movie</h2>

<div class="row">

    <div class="col">

        <!-- Form start -->
        <form method="POST" action="{{ url_for('edit_movie', movie_id=movie._id) }}">

            <!-- Boostrap card -->
            <div class="card mb-3 lounge-main-opaque-bg ">

                <div class="row g-0">

                    <div class="col-12 col-md-4">
                        <div class="card-body">
                            <img src="{{ movie.poster }}" class="img-fluid rounded" alt="Movie poster">
                        </div>
                    </div>

                    <div class="col-12 col-md-8">
                        <div class="card-body lounge-blue-text">
                            <h3 class="card-title">{{ movie.title }}</h3>
                            <p class="card-text">Director: {{ movie.director }}</p>
                            <p class="card-text">Genre: {{ movie.genre }}</p>
                            <p class="card-text">Actors: {{ movie.actors }}</p>
                            <p class="card-text">Year: {{ movie.released }}</p>
                            <p class="card-text">Type: {{ movie.type }}</p>
                            <p class="card-text">Rated: {{ movie.rated }}</p>
                            <p class="card-text">IMDB Rating: {{ movie.imdb_rating }}</p>
                            <p class="card-text">Plot: {{ movie.plot }}</p>

                            <select id="category_name" name="category_name" class="form-select lounge-opaque-gray-bg"
                                aria-label="Default select example" required>
                                <option selected>Choose A Category</option>
                                {% for category in categories %}
                                    {% if category.category_name == movie.category_name %}
                                    <option value="{{ category.category_name }}" selected>{{ category.category_name }}</option>
                                    {% else %}
                                    <option value="{{ category.category_name }}">{{ category.category_name }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>

                            <select id="user_rating" name="user_rating" class="form-select lounge-opaque-gray-bg mt-1"
                                aria-label="Default select example">
                                <option selected>{{ movie.user_rating }}</option>
                                <option value="Not Watched">Not Watched</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>

                            <div class="mb-3">
                                <label for="user_notes" class="form-label">User Notes:</label>
                                <textarea class="form-control lounge-opaque-gray-bg" id="user_notes" name="user_notes"
                                    type="text" minlength="3" maxlength="200"
                                    required>{{- movie.user_notes -}}</textarea>
                            </div>

                            <div class="d-grid gap-2 col-6 mx-auto mb-1">
                                <!-- Edit and delete movie buttons -->
                                <button type="submit"
                                    class="btn btn-secondary lounge-light-blue-bg lounge-blue-text">Edit This Movie In
                                    Your List</button>
                                <a href="{{ url_for('add_movie') }}"
                                    class="btn lounge-white-text btn-success">Cancel</a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <!-- Card End -->

        </form>
        <!-- Form end -->

    </div>
</div>

{% endblock %}